// Package gen provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package gen

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"H4sIAAAAAAAC/9xa3U4jRxZ+lVLtSplIHmyYYaX1nTNDZrkYxmuItFqErMJdQCd2t6ermg1ClgBnN7vL",
	"KGzuVislo1FewOPBwQPYvMKpN1pVVf/a7XaD+Ulyg0x3ddWpU+d85ztf9z6u2Y2mbVGLM1zcx03ikAbl",
	"1FH/rVHSWCEN+meXOnvygkFZzTGb3LQtXMTwEwygD+fQgQvxBgYwhB6CPlyKEwTnMIRL6MAATsUxzmFT",
	"PvFaTZTDFmlQXMSckkZV/c5hh752TYcauMgdl+Ywq+3QBpGL8r2mHMy4Y1rbuNXK4S8YdZaNSVb9F06h",
	"BwNxBH3xjbZPHMFQHCC4gqEy9QyG0FWXe3AhTiaY5zLqVE3jWsa1/JvKgUuOYzsVypq2xai8QL8mjWZd",
	"/5T35I+abcgpVl6tVT9/9cXKc5zDDcoY2ZZXHcps16lRZNkcbdmuZSgPNB27SR1uUhabKn5ZT7yPqeU2",
	"cHEdry2VXlaX/rK8uraKc7hcif1+uVR5sSTXlnaUVleXX6x4/1aflVaeLz8vrS15d7WVG7nRzUfsTjq1",
	"0Inr2rRwfDiXvfklrfGx8XqH48NyuOzW6xX62qWMj3uAMGZuW9SoOnTXpH/zwjoeL94pIxhAB87kX/Gt",
	"jB8YiGPxdyQOoAdd8UZ8B13oiQMZOehRYW5u4VMZNpw2WMJ2A0OJ45A9+T9x+Y6twilpdM2hhFOjpPaw",
	"ZTsNwnERG4TTx9xU+WG59TrZlKGjQzDB9872bDM03Xq96mhfTjI0NkbnScIoxgl3WTT2XpWXVnAOe1E2",
	"Hjsj5z1qStLCUZ8GS+aSznxK3Kzu2E5S8KSe2G/BWUl+kZg/7osGbWx62ROE/O8duoWL+Hf5sITkPezL",
	"y1leqmeSciHE/alAES0RvhGTzPYWHDPeZFVS4+ZudLlN265TYslHfZhPOht5L5uhYbEInslFVk6yWZax",
	"a1ub5rs73Uv0JKbva5WTpJTa3a4arkM09I5V7ncKbE9hAD3JJLrqX8UmLqEHP8OpaCONlAj6SAEeEm1U",
	"riD4IIs+giEMELwXx3CB/PTHuQgc2q4EwIlYaLl+yNZs1+LVphNxlmlxuq3v3jiibu7oiEkJ1VLaZG3Z",
	"akWTy33hcgVVPBegksLEBrU4WqXOrlmj6NEaZRytEfZVDn1O6nW0UFhYlCVtlzpMn8f8XGGuIPdjN6lF",
	"miYu4idzhbknEmAI31Enmm+GOJrXZ6OO3dblWB6+Ou1lQ5pkMx7B3Wd6uHYJZfwz29jTvMXi1FLPk2az",
	"btbUDPkvmQ6aCIeKQDR253ECKuOm83i+UJhPBMUiLhkGYpQ4tR3citK6h6gEM6J6clTEmau6oNmo2thC",
	"Yf56DtcJkUSr1rG7IOP4iTTkNs8lLJC6LrZSDkqbl1aYonSx1Up0WRyUyhUkDmEIZ3Aquxl5mE8LTzN4",
	"LbQxzZ54h5CwPvwHurp9yUd7KuhIwtrTrPWj1/Eca+v+eL0zHW1Eoo1B2IiUK8g0EKk7lBh7iH5tMs5G",
	"zmKmfUo/t+Fn6CFxKNriX9ATh+IIuqINPXGkV3IbDSJbPgzv/BMRR+KNKgB9BB3tKeki1fx9K+eAc3kr",
	"yu376hk4hSFaSKb30IezkQ42mF0cQEeCNNlWQR+JJ4Y3pJUxRFQ1KjMgvlSjZ8DDyWmWljRT8WsKMt0M",
	"eQr3gzxhW4RlhXs8X3i88HRtfqH45Glx8Q9/vTVs8sj6/aMTdBVAqWwZihMlyfSRb849o5W0ZxSWRnP3",
	"rcqrnkpRP3vPoQPnntHoEfTVk5dwBUOl0QzEkUreE8nwrlSedsQ/oC9OPs2eiw7V0ZM5HSv+AzNkpF03",
	"qgEd1IF6oySNzXMjEjKVXkSXePiUlizTXbxzMiH30KyTGjWqmzI63UV8exk8MnmK8jSELgzhAwzHC5Kq",
	"NulH6eD4ShsZkAPeqtl7Y7JXX7dex1osVb3YAIYPgiR9uJDFO1m1fZOENNekP562ISuEMj0EqR/0GnDm",
	"d58DcaJ5g8SkQ7iAHgok011SdydRqWBQSKVqxLJsjnw8Qrale1kDlSvaFZb9jFiGaXjdVNwucaTIiwR8",
	"0YYrT6dUECqJYV/TIumrNNNGdN3QOstGuuVEXkiptrHm24NMC8kO1TeUl7z8HTH0beqh6RZ9NPaS2Nhl",
	"+iZiWnVUNvc6X5Mp5dwHGcRtxHdM5nn69ugr/AAdcSDa4p9hEp3qQhdIyXAl0xm6Mq6RV8YS8k+cjFfM",
	"8aEei5UkdQDn8raqkZNARPkawam0UQ5RwzTP7enfoy9sUqqqxFCTcbPG8tyTC7dpQj19QflqMFQJi7nY",
	"G6b1ZKeHQ/LxN1CtjVlLTlyAejq3GBPU8CapfUUtX49hVaZUrPXE50KFaDEmCGlBKVLz53FrI01cuDNN",
	"bPREx2WwMdlrurroOyWjEBxogWMycIrQG1knF/dPpsr2Thx5HaDkxOoF4Kgz7r2L/1966w6dJJZ8IdpB",
	"pqu9xHYl2qoYxbYGvUjmBrk3nrauJz1PT1slUl83baMvaO8kaa+TfFkxPgzVrDE16XXyvUfX2+wMaaYo",
	"i1eaS9FG4js4kxVGtFMCT+Z2nhhGeuclsb5kGLN0W8FrqvX9KVERfR2CS3WzRnErl/7QQvyhz+xNFdvR",
	"+tEkew31KUXmoFsLqNQtK7V+YX5ol/glNU0Y8W3N4Kgs+B/H2qh6K2FW5mZhNoU0/iFFyDqDfd+hTjq6",
	"u5tqprGC2EbiECkY6KgZ/M96LqGPHoUOFN+LozwM4b3XsV6IE92OJAIh9OBjVJ6RJ8iiiOAVn0k1SI5/",
	"QfmDc8ZfTAZdH1NGQudHeC/+DT04l2f2aydEWQN4QgQqjilDUL8kTQtESQzYi2Dkw5KhqMCll79TfWxj",
	"JFozvkfI/qXI2Hc4Cd+L3OB9etyYbG0DXEnaA0M4R+XKJ/pN0G+P4pUrn4jjXPDFRIq4lkmb8XNLJUks",
	"txjly6wUfCYxmfipR1cjo2dggBGs3SJ1RrOH7+1/05H2lcwdyOl+TzfugskSR0oVSnGVv9K0biojX/sx",
	"Qii+12oZfJwYmb+i1PtJt1Pe5rwO6xu4gA58QNCRdRj60JX3dbuV9oXyWKK1gmv7/hfLusBJzuFd0IMj",
	"F2JqXuT6nyip853olbCJa220/h8AAP//FwgGfSguAAA=",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
